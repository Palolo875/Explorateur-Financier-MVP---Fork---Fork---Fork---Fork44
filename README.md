# Magic Patterns - Vite Template

This code was generated by [Magic Patterns](https://magicpatterns.com) for this design: [Source Design](https://www.magicpatterns.com/c/epj3ukiakm1zrdwg6an2lp)

## Architecture Overview

This application is a personal finance dashboard that helps users track their finances, set goals, and gain insights into their spending habits. It is built with a modern frontend stack and a serverless backend powered by Supabase.

### Key Features:

*   **Supabase Backend**: User authentication and database management are handled by Supabase.
*   **Serverless Edge Functions**: Sensitive API calls to services like Plaid and Alpha Vantage are routed through Supabase Edge Functions to protect API keys.
*   **Real-time Data**: The application fetches real-time data from various financial APIs for economic data, market data, and educational content.
*   **AI-Powered Insights**: The application uses TensorFlow.js for transaction categorization and a custom insights engine to provide users with personalized financial advice.
*   **Mock Data Mode**: The application can be run in a mock data mode for development and testing without the need for real API keys.

## Getting Started

### Prerequisites

*   Node.js and npm
*   A Supabase account (if you want to run the application with a real backend)

### Installation

1.  Clone the repository.
2.  Run `npm install` to install the dependencies.

### Configuration

1.  Create a `.env.local` file in the root of the project. You can copy the `.env.example` file if it exists, or create a new one.
2.  Add the following environment variables to your `.env.local` file:

    ```
    VITE_SUPABASE_URL=YOUR_SUPABASE_URL
    VITE_SUPABASE_ANON_KEY=YOUR_SUPABASE_ANON_KEY
    VITE_ALPHA_VANTAGE_API_KEY=YOUR_ALPHA_VANTAGE_API_KEY
    VITE_GOOGLE_CLOUD_NLP_API_KEY=YOUR_GOOGLE_CLOUD_NLP_API_KEY
    VITE_USE_MOCK_DATA=true
    ```

3.  **`USE_MOCK_DATA` Flag**:
    *   Set `VITE_USE_MOCK_DATA=true` to run the application with mock data. This is useful for development and testing without the need for API keys.
    *   Set `VITE_USE_MOCK_DATA=false` to run the application with real data from Supabase and the integrated APIs. You will need to provide the necessary API keys and Supabase credentials for this to work.

### Running the Application

Run `npm run dev` to start the development server. The application will be available at `http://localhost:5173`.

## Services

The application is built with a modular architecture, with different services responsible for fetching data from various sources.

*   **`services/economy.ts`**: Fetches economic data (inflation, interest rates) from the World Bank and Eurostat APIs.
*   **`services/markets.ts`**: Fetches market data (stocks, crypto) from Alpha Vantage (via a Supabase Edge Function) and CoinGecko.
*   **`services/banking.ts`**: Fetches banking transactions from Plaid (via a Supabase Edge Function).
*   **`services/ml.ts`**: Provides machine learning models for transaction categorization and cashflow prediction.
*   **`services/education.ts`**: Fetches educational resources from the OpenLibrary API.

## Edge Functions

The application uses Supabase Edge Functions to securely call sensitive APIs.

*   **`getPlaidTransactions`**: Connects to the Plaid Sandbox and returns formatted transactions.
*   **`getMarketData`**: Calls the Alpha Vantage API with a secure API key.
*   **`analyzeWithNLP`**: Calls the Google Cloud NLP API for natural language processing tasks.

These functions are written in TypeScript and are located in the `supabase/functions` directory (note: this directory is not part of the current project structure and would need to be created).

## Insights Engine

The application includes an "intelligent" insights engine that analyzes user data to provide personalized financial advice.

### How it works:

1.  **Data Collection**: The engine fetches the user's transactions, goals, and emotional journal entries from Supabase.
2.  **Behavioral Analysis**: It then analyzes this data to identify patterns and behavioral biases, such as:
    *   **Status Quo Bias**: Detecting unused recurring subscriptions.
    *   **Ease Effect**: Identifying spending spikes after a salary deposit.
    *   **Procrastination**: Noticing when financial goals are not updated.
    *   **Optimism Bias**: Comparing optimistic forecasts with actual results.
3.  **Content Generation**: For each insight, the engine:
    *   Associates it with a recognized cognitive bias.
    *   Adds a related psychological fact from an internal dataset.
    *   Fetches a motivational quote from the ZenQuotes API.
    *   Generates a structured insight object with a message, bias, fact, quote, and recommendation.

### Extensibility:

The insights engine is designed to be extensible. You can easily add new:
*   **Cognitive Biases and Psychological Facts**: By updating the `src/data/psychology.ts` file.
*   **Quote and Trivia Sources**: By adding new functions to the `src/services/insights.ts` file and integrating them into the `generateInsights` function in `src/lib/insightsEngine.ts`.
